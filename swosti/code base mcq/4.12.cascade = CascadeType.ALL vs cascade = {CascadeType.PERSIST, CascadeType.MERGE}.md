‡¶ñ‡ßÅ‡¶¨ ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶™‡¶æ‡¶∞‡ßç‡¶•‡¶ï‡ßç‡¶Ø ‚Äî **production-grade JPA design** ‡¶è‡¶ñ‡¶æ‡¶®‡ßá‡¶á ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶π‡¶Ø‡¶º‡•§
‡¶ö‡¶≤ **clear table + real scenarios** ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶¨‡ßÅ‡¶ù‡¶ø üëá

---

## üîπ `cascade = {CascadeType.PERSIST, CascadeType.MERGE}`

```java
@OneToMany(
    mappedBy = "user",
    cascade = {CascadeType.PERSIST, CascadeType.MERGE},
    orphanRemoval = true
)
```

### ‚úÖ ‡¶ï‡ßÄ ‡¶ï‡¶∞‡ßá?

| Parent operation | Child effect        |
| ---------------- | ------------------- |
| `persist(user)`  | child persist       |
| `merge(user)`    | child merge         |
| `remove(user)`   | ‚ùå child NOT deleted |
| `detach(user)`   | ‚ùå child unaffected  |
| `refresh(user)`  | ‚ùå child unaffected  |

### üéØ Use when

* Child data **valuable** (orders, payments, logs)
* Parent delete ‡¶ï‡¶∞‡¶≤‡ßá child delete ‡¶ï‡¶∞‡¶æ **dangerous**
* Controlled delete ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞

üìå **Most production systems ‡¶è recommended**

---

## üîπ `cascade = CascadeType.ALL`

```java
@OneToMany(
    mappedBy = "user",
    cascade = CascadeType.ALL
)
```

### ‚úÖ ‡¶ï‡ßÄ ‡¶ï‡¶∞‡ßá?

| Parent operation | Child effect    |
| ---------------- | --------------- |
| `persist`        | ‚úÖ               |
| `merge`          | ‚úÖ               |
| `remove`         | üö® child DELETE |
| `detach`         | ‚úÖ               |
| `refresh`        | ‚úÖ               |

### ‚ö†Ô∏è Danger

```java
entityManager.remove(user);
```

‚ùå User delete
‚ùå **‡¶∏‡¶¨ child delete** üò±
‚û°Ô∏è Permanent data loss

---

## üß† CascadeType.ALL = Which types?

```java
ALL = PERSIST
    + MERGE
    + REMOVE
    + REFRESH
    + DETACH
```

---

## üîÅ Side-by-Side Comparison (Interview Gold)

| Feature                | PERSIST + MERGE | ALL         |
| ---------------------- | --------------- | ----------- |
| Auto save child        | ‚úÖ               | ‚úÖ           |
| Auto update child      | ‚úÖ               | ‚úÖ           |
| Auto delete child      | ‚ùå               | üö® YES      |
| Safe in prod           | ‚úÖ               | ‚ùå (usually) |
| Accidental delete risk | ‚ùå               | üî• HIGH     |

---

## üõ°Ô∏è Recommended Patterns

### üîπ Strong ownership (safe)

```java
@OneToMany(
    mappedBy = "user",
    cascade = {CascadeType.PERSIST, CascadeType.MERGE},
    orphanRemoval = true
)
```

### üîπ True dependent child (rare)

```java
@OneToMany(
    mappedBy = "user",
    cascade = CascadeType.ALL,
    orphanRemoval = true
)
```

üìå Only if:

* Child has **no meaning without parent**
* Example: `User ‚Üí UserSettings`

---

## üéØ Interview One-Liner (Perfect)

> **`CascadeType.ALL` propagates all lifecycle operations including delete, which is dangerous in production. Using only `PERSIST` and `MERGE` is safer and gives controlled deletion with `orphanRemoval`.**

---

## üî• Real Production Rule

> **Never use `CascadeType.ALL` blindly on `@OneToMany`**

---

‡¶ö‡¶æ‡¶ì ‡¶§‡ßã ‡¶Ü‡¶Æ‡¶ø next ‡¶è ‡¶¶‡ßá‡¶ñ‡¶æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø:

* SQL difference between cascade remove & orphan removal
* Soft delete alternative (production safe)
* FK constraint pitfalls
* Real Hibernate delete logs

‡¶¨‡¶≤‡¶≤‡ßá‡¶á ‡¶¨‡¶≤‡ßã üëç
