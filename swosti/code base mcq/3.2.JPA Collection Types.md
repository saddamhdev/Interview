à¦ à¦¿à¦• à¦†à¦›à§‡ ğŸ‘
à¦šà¦² **JPA / Hibernate-à¦ à¦¬à§à¦¯à¦¬à¦¹à§ƒà¦¤ different types of collections** à¦à¦•à¦¦à¦® **à¦¸à¦¹à¦œ + practical** à¦­à¦¾à¦¬à§‡ à¦¬à§à¦à¦¿à¥¤

---

## ğŸ”¹ JPA Collection Types (Overview)

![Image](https://www.logicbig.com/tutorials/java-ee-tutorial/jpa/element-collection/images/element-collection.png)

![Image](https://www.laliluna.com/jpa-hibernate-guide/images/c_examples_mapping_option.jpg)

![Image](https://media.licdn.com/dms/image/v2/D4D22AQHw5bPFxGm7Pg/feedshare-shrink_800/B4DZhGEWmqG8Ag-/0/1753522204217?e=2147483647\&t=J4_LrSJdt9l8ITKSlalrh_nS4ivyZAozohAiFYRQE4w\&v=beta)

JPA-à¦¤à§‡ à¦®à§‚à¦²à¦¤ **à§ª à¦§à¦°à¦¨à§‡à¦° collection** à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦¾ à¦¹à§Ÿ:

1ï¸âƒ£ `List`
2ï¸âƒ£ `Set`
3ï¸âƒ£ `Map`
4ï¸âƒ£ `Collection` (generic, à¦•à¦® à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦¹à§Ÿ)

---

## 1ï¸âƒ£ `List<T>`

```java
@OneToMany(mappedBy = "user")
private List<Order> orders;
```

### ğŸ§  à¦¬à§ˆà¦¶à¦¿à¦·à§à¦Ÿà§à¦¯

* **Order maintain à¦•à¦°à§‡**
* Duplicate allowed
* Index-based access (`get(0)`)

### ğŸ” DB behavior

* Hibernate à¦…à¦¤à¦¿à¦°à¦¿à¦•à§à¦¤ **order column** à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à§‡
* Update cost à¦¬à§‡à¦¶à¦¿ (reindexing)

### âœ… Use when

* Order à¦—à§à¦°à§à¦¤à§à¦¬à¦ªà§‚à¦°à§à¦£
* UI display (timeline, history)

âš ï¸ **Performance tip**
Large collection à¦¹à¦²à§‡ avoid à¦•à¦°à§‹

---

## 2ï¸âƒ£ `Set<T>` â­ (Most recommended)

```java
@OneToMany(mappedBy = "user")
private Set<Order> orders;
```

### ğŸ§  à¦¬à§ˆà¦¶à¦¿à¦·à§à¦Ÿà§à¦¯

* **No duplicate**
* Order guarantee à¦¨à§‡à¦‡
* Fast lookup (`hashCode + equals`)

### ğŸ” DB behavior

* Simple & efficient
* No extra column

### âœ… Use when

* Uniqueness à¦¦à¦°à¦•à¦¾à¦°
* Business entities (Orders, Roles)

ğŸ† **Production favorite**

---

## 3ï¸âƒ£ `Map<K, V>`

```java
@OneToMany
@MapKey(name = "type")
private Map<String, Address> addressMap;
```

### ğŸ§  à¦¬à§ˆà¦¶à¦¿à¦·à§à¦Ÿà§à¦¯

* Key â†’ Value mapping
* Direct lookup by key

### ğŸ” DB behavior

* Extra key column
* Slightly complex mapping

### âœ… Use when

* Natural key à¦†à¦›à§‡
  (ex: `"HOME" â†’ address`)

---

## 4ï¸âƒ£ `Collection<T>`

```java
@OneToMany
private Collection<Order> orders;
```

### ğŸ§  à¦¬à§ˆà¦¶à¦¿à¦·à§à¦Ÿà§à¦¯

* No index
* No uniqueness guarantee
* Very generic

âŒ Rarely used
âŒ No extra benefit

---

## ğŸ” Comparison Table (Interview Gold ğŸ†)

| Type       | Order  | Duplicate | Performance | Recommended       |
| ---------- | ------ | --------- | ----------- | ----------------- |
| List       | âœ…      | âœ…         | âš ï¸ Medium   | UI / Ordered data |
| Set        | âŒ      | âŒ         | âœ… Best      | âœ… YES             |
| Map        | By key | âŒ         | âš ï¸ Medium   | Special cases     |
| Collection | âŒ      | âŒ         | âŒ           | âŒ Avoid           |

---

## ğŸ”¥ Hibernate Best Practice

```java
@OneToMany(
    mappedBy = "user",
    fetch = FetchType.LAZY
)
private Set<Order> orders = new HashSet<>();
```

âœ”ï¸ Safe
âœ”ï¸ Fast
âœ”ï¸ Clean

---

## âš ï¸ Important Note (equals & hashCode)

For `Set`:

```java
@Override
public boolean equals(Object o) { ... }

@Override
public int hashCode() { ... }
```

â— à¦¨à¦¾ à¦¦à¦¿à¦²à§‡:

* Duplicate issue
* Unexpected behavior

---

## ğŸ¯ Interview One-liner

> **In JPA, `Set` is preferred for collections due to better performance and uniqueness, while `List` is used when ordering matters.**

---

## ğŸ§  Easy Memory Trick

* **Order à¦¦à¦°à¦•à¦¾à¦° â†’ List**
* **Unique à¦¦à¦°à¦•à¦¾à¦° â†’ Set**
* **Key à¦¦à¦°à¦•à¦¾à¦° â†’ Map**

---

à¦šà¦¾à¦“ à¦¤à§‹ à¦†à¦®à¦¿ next-à¦ à¦¦à§‡à¦–à¦¾à¦¤à§‡ à¦ªà¦¾à¦°à¦¿:

* List vs Set SQL difference
* equals/hashCode best pattern
* Large collection performance traps
* Real Hibernate bugs

à¦¬à¦²à¦²à§‡à¦‡ à¦¬à¦²à§‹ ğŸ˜Š
