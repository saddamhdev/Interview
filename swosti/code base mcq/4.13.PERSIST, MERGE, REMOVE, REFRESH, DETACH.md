‡¶è‡¶ó‡ßÅ‡¶≤‡ßã‡¶á ‡¶π‡¶≤‡ßã **JPA Cascade Types**‚Äîparent entity-‡¶∞ ‡¶ï‡ßã‡¶®‡ßã action child entity-‡¶§‡ßá **propagate ‡¶π‡¶¨‡ßá ‡¶ï‡¶ø ‡¶®‡¶æ** ‡¶∏‡ßá‡¶ü‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßá‡•§

```java
PERSIST,
MERGE,
REMOVE,
REFRESH,
DETACH
```

‡¶ö‡¶≤ **‡¶è‡¶ï‡¶ü‡¶æ ‡¶è‡¶ï‡¶ü‡¶æ ‡¶ï‡¶∞‡ßá very clear ‡¶≠‡¶æ‡¶¨‡ßá** ‡¶¨‡ßÅ‡¶ù‡¶ø üëá

---

## 1Ô∏è‚É£ `CascadeType.PERSIST`

### üîπ ‡¶ï‡ßÄ ‡¶ï‡¶∞‡ßá?

Parent `persist()` ‡¶ï‡¶∞‡¶≤‡ßá **child-‡¶ì auto persist** ‡¶π‡¶¨‡ßá‡•§

```java
entityManager.persist(user);
```

‚û°Ô∏è user + ‡¶§‡¶æ‡¶∞ orders ‚Üí **DB-‡¶§‡ßá save**

### üìå Use case

* New parent + new child ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá save
* Most common & safe

---

## 2Ô∏è‚É£ `CascadeType.MERGE`

### üîπ ‡¶ï‡ßÄ ‡¶ï‡¶∞‡ßá?

Detached parent `merge()` ‡¶ï‡¶∞‡¶≤‡ßá **child-‡¶ì merge/update** ‡¶π‡¶¨‡ßá‡•§

```java
entityManager.merge(user);
```

‚û°Ô∏è user + orders ‚Üí **update**

### üìå Use case

* Update scenarios
* REST API (DTO ‚Üí entity merge)

---

## 3Ô∏è‚É£ `CascadeType.REMOVE` ‚ö†Ô∏è (Dangerous)

### üîπ ‡¶ï‡ßÄ ‡¶ï‡¶∞‡ßá?

Parent `remove()` ‡¶ï‡¶∞‡¶≤‡ßá **child-‡¶ì delete** ‡¶π‡¶¨‡ßá‡•§

```java
entityManager.remove(user);
```

‚ùå user delete
‚ùå **‡¶∏‡¶¨ child delete** üò±

### üìå Use case (rare)

* Child has **no meaning without parent**
* Example: `User ‚Üí UserSettings`

---

## 4Ô∏è‚É£ `CascadeType.REFRESH`

### üîπ ‡¶ï‡ßÄ ‡¶ï‡¶∞‡ßá?

Parent `refresh()` ‡¶ï‡¶∞‡¶≤‡ßá child-‡¶ì **DB ‡¶•‡ßá‡¶ï‡ßá reload** ‡¶π‡¶¨‡ßá‡•§

```java
entityManager.refresh(user);
```

‚û°Ô∏è Unsaved changes lost
‚û°Ô∏è DB state restored

### üìå Use case

* Rare
* Debugging / consistency reset

---

## 5Ô∏è‚É£ `CascadeType.DETACH`

### üîπ ‡¶ï‡ßÄ ‡¶ï‡¶∞‡ßá?

Parent `detach()` ‡¶π‡¶≤‡ßá child-‡¶ì **persistence context ‡¶•‡ßá‡¶ï‡ßá detached** ‡¶π‡¶¨‡ßá‡•§

```java
entityManager.detach(user);
```

‚û°Ô∏è Hibernate ‡¶Ü‡¶∞ track ‡¶ï‡¶∞‡¶¨‡ßá ‡¶®‡¶æ

### üìå Use case

* Advanced use
* Memory / session control

---

## üß† CascadeType.ALL ‡¶Æ‡¶æ‡¶®‡ßá ‡¶ï‡ßÄ?

```java
CascadeType.ALL
```

‚¨áÔ∏è ‡¶è‡¶∞ equivalent:

```java
PERSIST + MERGE + REMOVE + REFRESH + DETACH
```

‚ö†Ô∏è **REMOVE included ‚Üí dangerous**

---

## üîÅ Full Comparison Table (Interview Gold üèÜ)

| Cascade Type | Save | Update | Delete | Reload | Detach |
| ------------ | ---- | ------ | ------ | ------ | ------ |
| PERSIST      | ‚úÖ    | ‚ùå      | ‚ùå      | ‚ùå      | ‚ùå      |
| MERGE        | ‚ùå    | ‚úÖ      | ‚ùå      | ‚ùå      | ‚ùå      |
| REMOVE       | ‚ùå    | ‚ùå      | üî•     | ‚ùå      | ‚ùå      |
| REFRESH      | ‚ùå    | ‚ùå      | ‚ùå      | ‚úÖ      | ‚ùå      |
| DETACH       | ‚ùå    | ‚ùå      | ‚ùå      | ‚ùå      | ‚úÖ      |
| ALL          | ‚úÖ    | ‚úÖ      | üî•     | ‚úÖ      | ‚úÖ      |

---

## ‚úÖ Production-Safe Recommendation

```java
@OneToMany(
    mappedBy = "user",
    cascade = {CascadeType.PERSIST, CascadeType.MERGE},
    orphanRemoval = true
)
```

‚úîÔ∏è Safe
‚úîÔ∏è Predictable
‚úîÔ∏è No accidental mass delete

---

## üéØ Interview One-Liner

> **Cascade types define which lifecycle operations on a parent entity are propagated to its child entities; `CascadeType.ALL` includes REMOVE and can cause accidental deletions, so it should be used cautiously.**

---

‡¶ö‡¶æ‡¶ì ‡¶§‡ßã ‡¶Ü‡¶Æ‡¶ø next ‡¶è ‡¶¶‡ßá‡¶ñ‡¶æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø:

* Real SQL generated per cascade
* orphanRemoval vs REMOVE deep comparison
* Soft delete alternative (production best)
* Hibernate state transition diagram

‡¶¨‡¶≤‡¶≤‡ßá‡¶á ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶ø üöÄ
