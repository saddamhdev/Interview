## ЁЯзк Dirty Read (Database Isolation Concept)

![Image](https://vladmihalcea.com/wp-content/uploads/2018/05/DirtyRead.png)

![Image](https://s33046.pcdn.co/wp-content/uploads/2020/06/read-uncommitted-isolation-level-explanation-diagr-2.png)

![Image](https://i.sstatic.net/KFRXJ.png)

### ЁЯФ╣ Dirty Read ржХрзА?

**Dirty Read** ржШржЯрзЗ ржпржЦржитАФ

> ржПржХржЯрж┐ transaction ржПржоржи ржбрж╛ржЯрж╛ ржкржбрж╝рзЗ (READ ржХрж░рзЗ),
> ржпрзЗржЯрж╛ ржЕржирзНржп ржПржХржЯрж┐ transaction **commit ржирж╛ ржХрж░рзЗржЗ** ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗржЫрзЗред

ЁЯСЙ ржпржжрж┐ рж╕рзЗржЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ transaction ржкрж░рзЗ **ROLLBACK** ржХрж░рзЗ,
рждрж╛рж╣рж▓рзЗ ржкрзНрж░ржержо transaction ржпрзЗ ржбрж╛ржЯрж╛ ржкржбрж╝рзЗржЫрж┐рж▓, рж╕рзЗржЯрж╛ ржЫрж┐рж▓ **ржнрзБрж▓ / ржЕрж╕рзНржерж╛ржпрж╝рзА (dirty)**ред

---

## ЁЯФБ Simple Example

ржзрж░рж┐, ржПржХржЯрж┐ ржмрзНржпрж╛ржВржХ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрзЗ balance = **1000**

### ЁЯз╡ Transaction A (Uncommitted)

```sql
BEGIN;
UPDATE account SET balance = 500 WHERE id = 1;
-- ржПржЦржиржУ COMMIT ржХрж░рж╛ рж╣рзЯржирж┐
```

### ЁЯз╡ Transaction B (Dirty Read)

```sql
SELECT balance FROM account WHERE id = 1;
-- Result: 500  тЭМ (dirty data)
```

### ЁЯз╡ Transaction A

```sql
ROLLBACK;
```

тЮбя╕П ржЖрж╕рж▓ balance ржЖржмрж╛рж░ **1000**
ржХрж┐ржирзНрждрзБ Transaction B **500** ржжрзЗржЦрзЗржЫрж┐рж▓ тЖТ тЭМ **Dirty Read**

---

## ЁЯФТ Isolation Levels & Dirty Read

![Image](https://blog.acolyer.org/wp-content/uploads/2016/02/isolation-levels-table.png)

![Image](https://s33046.pcdn.co/wp-content/uploads/2020/06/read-uncommitted-isolation-level-explanation-diagr-2.png)

![Image](https://assets.bytebytego.com/diagrams/0239-isolation-level.png)

| Isolation Level  | Dirty Read Possible? |
| ---------------- | -------------------- |
| READ UNCOMMITTED | тЬЕ Yes                |
| READ COMMITTED   | тЭМ No                 |
| REPEATABLE READ  | тЭМ No                 |
| SERIALIZABLE     | тЭМ No                 |

---

## ЁЯРШ PostgreSQL-ржП Dirty Read рж╣рзЯ ржХрж┐?

### тЭМ **ржирж╛, ржХржЦржирзЛржЗ ржирж╛**

PostgreSQL рж╕ржмрж╕ржорзЯ **MVCC (Multi-Version Concurrency Control)** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

ЁЯСЙ ржПржоржиржХрж┐ рждрзБржорж┐ рж▓рж┐ржЦрж▓рзЗржУ:

```sql
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
```

PostgreSQL ржПржЯрж╛ржХрзЗ internally **READ COMMITTED** рж╣рж┐рж╕рзЗржмрзЗ ржЯрзНрж░рж┐ржЯ ржХрж░рзЗред

ЁЯУМ **PostgreSQL guarantees:**

> **Dirty reads are impossible**

---

## ЁЯза Why PostgreSQL Prevents Dirty Read?

* ржкрзНрж░рждрж┐ржЯрж┐ transaction рждрж╛рж░ ржирж┐ржЬрзЗрж░ **snapshot** ржжрзЗржЦрзЗ
* Uncommitted data ржЕржирзНржп transaction ржжрзЗржЦрждрзЗ ржкрж╛ржпрж╝ ржирж╛
* Old committed version visible ржерж╛ржХрзЗ

тЮбя╕П High data consistency + safety

---

## тЪая╕П Dirty Read ржХрзЗржи ржЦрж╛рж░рж╛ржк?

| Risk                  | Effect                |
| --------------------- | --------------------- |
| Wrong calculation     | Financial loss        |
| Inconsistent UI       | User confusion        |
| Broken business logic | Bug / fraud           |
| Debug nightmare       | Non-reproducible bugs |

---

## ЁЯФБ Dirty Read vs Similar Problems

| Phenomenon          | Meaning                   |
| ------------------- | ------------------------- |
| Dirty Read          | Uncommitted data read     |
| Non-repeatable Read | Same row, different value |
| Phantom Read        | New rows appear           |
| Lost Update         | Overwritten updates       |

---

## ЁЯОп Interview-Ready One-Liner

> **Dirty Read happens when a transaction reads uncommitted data from another transaction. PostgreSQL prevents dirty reads entirely using MVCC.**

---

ржпржжрж┐ ржЪрж╛ржУ, ржЖржорж┐ ржкрж░рзЗрж░ ржзрж╛ржкрзЗ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рждрзЗ ржкрж╛рж░рж┐:

* ЁЯФД Non-Repeatable Read
* ЁЯС╗ Phantom Read
* ЁЯРШ MVCC internals (xmin/xmax)
* Spring Boot + PostgreSQL isolation best practices

ржмрж▓рж▓рзЗржЗ рж╢рзБрж░рзБ ржХрж░рж┐ ЁЯСМ
